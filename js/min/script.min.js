window.console&&console.log||!function(){for(var a=function(){},b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","markTimeline","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d=window.console={};c--;)d[b[c]]=a}();var waitForFinalEvent=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId"),a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}();!function(a){function b(){("gallery"===v.attr("data-display")||"press"===v.attr("data-display"))&&B.fadeIn()}function c(){s=y.length,t=Math.floor(s/2)}function d(){x.height(v.hasClass("admin-bar")?u.height()-32:u.height()),y.each(function(){var b,c=a(this);c.height(v.hasClass("admin-bar")?u.height()-32:u.height()),b=c.index()<=Math.floor(s/2)?u.width()/2+c.index()*c.width():u.width()/2-(s-c.index())*c.width(),c.css({left:b}),c.attr("data-showing",c.index()),0===c.index()&&o()})}function e(b){y.each(function(){var b=a(this);b.addClass("preload"),setTimeout(function(){b.remove()},210)}),b&&b()}function f(b,e){setTimeout(function(){b.images.forEach(function(e,f){0===f&&(y=a());var g=a('<img src="'+e.image+'" class="image preload">');y=y.add(g),c(),f===b.images.length-1&&(s=b.images.length,x.append(y),setTimeout(function(){"gallery"===v.attr("data-display")&&d(),imagesLoaded([g])&&g.removeClass("preload"),p(function(){"gallery"!==v.attr("data-display")&&z.removeClass("preload")}),i()},200))})},e?e:0)}function g(){var a=new XMLHttpRequest,b=document.getElementById("site-url").innerHTML;a.open("GET",b+"?request=content",!0),a.onload=function(){a.status>=200&&a.status<400&&(data=JSON.parse(a.responseText),v.attr("data-remember",b),f(data))},a.send()}function h(){var b=a('[data-showing="0"]');b.length>0?w.css("left",parseInt(b.css("left"),10)-b.width()/2-200).animate({opacity:1}):setTimeout(h,10)}function i(){var a=imagesLoaded("#images");a.on("progress",function(a,b){b.img.classList.remove("preload"),d(),h()})}function j(){if("gallery"===v.attr("data-display")){var b=a(this),c=+b.attr("data-showing");c>=1&&t>=c?v.addClass("nexting").removeClass("preving"):s-1>=c&&c>t?v.addClass("preving").removeClass("nexting"):k()}else k()}function k(){v.removeClass("nexting preving")}function l(){x.height(v.hasClass("admin-bar")?u.height()-32:u.height()),y.each(function(){var b,c=a(this),d=+c.attr("data-showing");c.height(v.hasClass("admin-bar")?u.height()-32:u.height()),b=t>=d?u.width()/2+d*c.width():u.width()/2-(s-d)*c.width(),c.css({left:b})})}function m(b){k(),"gallery"===v.attr("data-display")&&y.each(function(){var c,d=a(this),e=+d.attr("data-showing"),f=(e+b+s)%s;c=t>=f?u.width()/2+f*d.width():u.width()/2-(s-f)*d.width(),(t>=e&&f>t&&b>0||e>t&&t>=f&&0>b)&&d.hide(),d.animate({left:c},600,function(){(t>=e&&f>t&&b>0||e>t&&t>=f&&0>b)&&d.show()}),d.attr("data-showing",f)})}function n(){C=a("a"),C.each(function(){this.href.indexOf(location.origin)>-1&&(this.href=this.href.replace("?request=content","")+"?request=content")})}function o(){var b=a('[data-showing="0"]');b.length>0?z.css({left:parseInt(b.css("left"),10),"min-height":v.hasClass("admin-bar")?u.height()-32:u.height(),width:b.width()+2}):setTimeout(o,10)}function p(b){var c=a("#content"),d=v.hasClass("admin-bar")?u.height()-32:u.height();c.length>0&&c.css("top",c.height()<d?(d-c.height())/3:0),setTimeout(p,10),b&&b()}function q(a,c){B.hide();var d,g="",h=0;if(a.is_gallery)d="gallery",z.addClass("preload"),v.attr("data-remember")!==c&&(v.attr("data-remember",c),e(function(){f(a,500)}),h=500);else if(a.is_press){if(a.is_press){d="press";var i=a.clipping;i.forEach(function(a){g+='<p class="uppercase">'+a.link+"</p>",g+='<img src="'+a.image+'">'})}}else d="content",g=a.content;a.is_gallery||setTimeout(function(){A.animate({opacity:0})},h),setTimeout(function(){A.html(g),p(function(){A.animate({opacity:1}),z.removeClass("preload")}),b()},500+h),v.attr("data-display",d)}function r(b){var c=(a(this),this.href);if(window.location.origin+window.location.pathname===c.replace("?request=content",""))return b.preventDefault();if(c.indexOf(location.origin)>-1&&c.indexOf("?request=content")>-1){b.preventDefault(),w.find(".current-menu-item").removeClass("current-menu-item"),w.find('[href="'+c+'"]').parent().addClass("current-menu-item"),c=c.replace("?request=content","");var d=new XMLHttpRequest;d.open("GET",this.href,!0),d.onload=function(){if(d.status>=200&&d.status<400){data=JSON.parse(d.responseText),q(data,c);var a=data.title+" | DDUGOFF";window.history.pushState({},a,c),document.title=a}},d.send()}}var s,t,u=a(window),v=a("body"),w=(a("main"),a("nav")),x=a("#images"),y=a(".image"),z=a("#container"),A=a("#content"),B=a(".return-to-top");"gallery"===v.attr("data-display")&&v.attr("data-remember",window.location.origin+window.location.pathname),B.click(function(){a("html, body").animate({scrollTop:0},1e3)}),b(),c(),d(),"gallery"!==v.attr("data-display")&&g(),h(),i(),u.on("resize",function(){waitForFinalEvent(h,600,"showNav")}),v.on("mouseover",".image",j),u.on("resize",function(){waitForFinalEvent(l,500,"adjustSlideShow")}),v.on("click",".image",function(){var b=a(this),c=+b.attr("data-showing");m(0!==c&&t>=c?-c:s-c)}),u.keydown(function(a){37===a.keyCode&&m(1),39===a.keyCode&&m(-1)});var C=a("a");n(),o(),u.on("resize",function(){waitForFinalEvent(o,600,"sizeContainer"),waitForFinalEvent(p,600,"positionContent")}),C.click(r)}(jQuery);